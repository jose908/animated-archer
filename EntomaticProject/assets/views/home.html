<div ng-init="loadData()" ng-cloak></div>

  <a><strong><span class="glyphicon glyphicon-dashboard"></span> Entomatic Dashboard</strong></a>

  <hr>

      <div class="alert alert-danger" role="alert" > <a ui-sref='main.alarms'class="alert-link">New Alarms</a><a class="badge pull-right" ui-sref='main.alarms'>{{initValues.alarms }}</a></div>

      <div class="panel">
        <div class="panel-heading">
          <i class="icon icon-chevron-up chevron"></i>
          <i class="icon icon-wrench pull-right"></i>
        </div>
        <div class="panel-content">

          <div class="btn-group btn-group-justified">
            <a ui-sref='main.sensorLocation' class="btn btn-primary col-sm-3">
              <i class="glyphicon glyphicon-map-marker"></i><br>
              Location
            </a>
            <a ui-sref='main.statistics' class="btn btn-primary col-sm-3">
              <i class="glyphicon glyphicon-stats"></i><br>
              Stats
            </a>
            <a ui-sref='main.alarms' class="btn btn-primary col-sm-3">
              <i class="glyphicon glyphicon-bell"></i><br>
              Alarms
            </a>
            <a ui-sref='main.config'class="btn btn-primary col-sm-3">
              <i class="glyphicon glyphicon-cog"></i><br>
              Config
            </a>
          </div>
        </div><!--/panel content-->
      </div><!--/panel-->

      <div class="panel panel-success">
        <div class="panel-heading"><strong>System Status </strong></div>
        <table class="table">
          <thead>
          <tr><th>Active Gateways</th>
            <th>Active Nodes</th><th></tr></thead>

          <tbody>
          <tr>
            <td>{{reportData.countGateways}}</td>
            <td>{{reportData.countSensor}}</td></tr>


        </table>
      </div>



      <div class="panel panel-default">
        <div class="panel-heading">Last Measurements (24h)</div>
        <div class="panel-body">
          <div class="table ">
            <table class="table ">
              <thead>
              <tr>
                <th>Node</th>
                <th>Measurement Type </th>
                <th>Measurement Value </th>
                <th>Date</th>
              </tr>
              </thead>
              <tbody ng-repeat="measurement in reportData.lastMeasurement.slice(((currentPage-1)*numPerPage), ((currentPage)*numPerPage))">
              <tr>
                <td>{{measurement.sensorId}}</td>
                <td>{{measurement.measurementTypeId.name}}</td>
                <td>{{measurement.sensorReading}}</td>
                <td>{{measurement.createDate | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}</td>
              </tr>
              </tbody>
              <tfoot>
              <tr>
                <td colspan="5" class="text-center">
                  <pagination
                    ng-model="currentPage"
                    total-items="measurementsTable.length"
                    items-per-page = "numPerPage"
                    boundary-links="true"
                    class="pagination-sm">
                  </pagination>
                </td>
              </tr>
            </table>
          </div>


        </div>
      </div><!--/panel-->




