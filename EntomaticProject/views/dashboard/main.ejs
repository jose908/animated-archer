<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="../../entomaticon.ico">

  <title>Entomatic Dashboard</title>


<link rel="stylesheet" href="/styles/bootstrap.css">
<script src="/js/dependencies/sails.io.js"></script>
  <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
<script src="/js/dependencies/angular.js"></script>
  <script src='/js/dependencies/lodash.js'></script>
  <script src='/js/dependencies/angular-google-maps.js'></script>
  <script src="/js/private/dashboard/main/MainModule.js"></script>
<script src="/js/private/dashboard/main/MainController.js"></script>
  <script src="/js/dependencies/ui-bootstrap.js"></script>

</head>


<body ng-app="MainModule" ng-controller="MainController" ng-cloak>

<!-- Header -->
<div id="top-nav" class="navbar navbar-inverse navbar-static-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="icon-toggle"></span>
    </button>
    <a class="navbar-brand" href="#">Entomatic</a>
  </div>
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav pull-right">

      <li dropdown>
        <a dropdown-toggle><strong>User</strong><b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="#">Settings</a></li>
              </ul>
      </li>

      <li><a href="/logout">Log out</a></li>
    </ul>
  </div>
</div>
<!-- /Header -->

<!-- Main -->
<div class="container">
  <div class="row">
    <div class="col-md-3">
      <!-- Left -->
      <strong>Menu</strong>
      <hr>


      <tabset vertical="true" type="pills">
        <tab ng-click="changeTab('home')">
          <tab-heading>
            <i class="glyphicon glyphicon-home"></i>  &nbsp;Home
          </tab-heading>
        </tab>
        <tab ng-click="loadStatusTab(false)">
          <tab-heading>
            <i class="glyphicon glyphicon-map-marker"></i> &nbsp;Sensor Location
          </tab-heading>
        </tab>
        <tab ng-click="changeTab('stadistics')">
          <tab-heading>
            <i class="glyphicon glyphicon-stats"></i> &nbsp;Stadistics
          </tab-heading>
        </tab>
        <tab ng-click="changeTab('alarms')">
          <tab-heading>
            <i class="glyphicon glyphicon-bell"></i> &nbsp;Alarms
          </tab-heading>
        </tab>
      </tabset>
    </div><!-- /span-3 -->

  <!--TABS--->
   <div class="col-md-9">

    <div ng-switch on="selectedTab">
      <div ng-switch-when="home">caca</div>


      <div ng-switch-when="sensorStatus">
                           <!--<div ng-include src="'/js/dependencies/sensorstatus.ejs'">-->

        <a><strong><span class="glyphicon glyphicon-dashboard"></span>&nbsp;Sensor Location</strong></a>
        <a title="Add Widget" data-toggle="modal" ng-click="loadStatusTab(true)" class="btn btn-primary pull-right"><span class="glyphicon glyphicon-refresh" ></span></a>

        <hr>

        <div ng-if ="!isMapLoaded"  class="col-md-10 col-md-offset-5">
        <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate bigger"></span>
        </div>

       <div ng-if = "isMapLoaded">

        <ui-gmap-google-map center='map.center' zoom='map.zoom'>

          <ui-gmap-marker data-ng-repeat="sensor in sensors" idkey="sensor.sensorId" coords="sensor" click="closeClick(sensor.sensorId)">
            <ui-gmap-window show="clickedMarker==sensor.sensorId">
              I'm here!

            </ui-gmap-window>

          </ui-gmap-marker>

        </ui-gmap-google-map>
       <div class="row spacer">
         <div class="panel panel-default">
           <div class="panel-heading">
             <h3 class="panel-title"><strong>Sensor List</strong></h3>
           </div>
           <div class="panel-body">

         <div class="table-responsive">
          <table class="table table-striped table-hover" ">
            <thead>
            <tr>
              <th>Sensor id</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>mac</th>
              <th>Created at</th>
            </tr>
            </thead>
            <tbody ng-repeat="sensor in sensors" ng-click="goToMarker(sensor.latitude, sensor.longitude, sensor.sensorId)">
            <tr>
              <td>{{sensor.sensorId}}</td>
              <td>{{sensor.latitude}}</td>
              <td>{{sensor.longitude}}</td>
              <td>{{sensor.mac}}</td>
              <td>{{sensor.createDate}}</td>
            </tr>
            </tbody>
          </table>
        </div>
       </div>
      </div>
       </div>
      </div>
      </div>








      <div ng-switch-when="stadistics">pipi</div>


      <div ng-switch-when="alarms">basura</div>


    </div>


</div><!-- /.modal -->








</body>
</html>
